kronos(()=>{console.log("ready Framework");let o=!1;async function s(o){o&&(kronos("img#icon").attr("add","src",`https://openweathermap.org/img/wn/${o.weather[0].icon}@2x.png`),kronos("link#IconLink").attr("add","href",`https://openweathermap.org/img/wn/${o.weather[0].icon}@2x.png`)),window.onresize=resize=()=>{window.innerWidth<=800?(kronos("nav").class("remove","d-inline-flex"),kronos("nav").class("add","d-flex"),kronos("nav").class("add","flex-row"),kronos("nav a").class("add","w-100"),kronos("nav div").class("add","w-100"),kronos("nav a").class("remove","w-auto"),kronos("nav div").class("remove","w-auto"),kronos("div#Body").class("remove","justify-content-around"),kronos("div#Body").class("remove","mt-11"),kronos("div#Body").class("add","flex-column"),kronos("div#Body").class("add","mt-30"),kronos("div#CardGeo").class("add","mt-1")):window.innerWidth>=801&&(kronos("nav").class("add","d-inline-flex"),kronos("nav").class("remove","d-flex"),kronos("nav").class("remove","flex-row"),kronos("nav a").class("remove","w-100"),kronos("nav div").class("remove","w-100"),kronos("nav a").class("remove","w-auto"),kronos("nav div").class("remove","w-auto"),kronos("div#Body").class("add","justify-content-around"),kronos("div#Body").class("add","mt-11"),kronos("div#Body").class("remove","flex-column"),kronos("div#Body").class("remove","mt-30"),kronos("div#CardGeo").class("remove","mt-1"))},resize(),kronos().request("POST","/notif",{type:"ui"},o=>{"notif"===o.type&&(kronos("div#notif").append(o.View),kronos("div#UIToast").toast("show"))})}var a={enableHighAccuracy:!0,timeout:5e3,maximumAge:0};function n(a){kronos("#loadData").show(),kronos("#dLoadData").class("toggle","border-0"),kronos("p#AccuracyGeo").html(Math.round(a.coords.accuracy)+" %"),o=!0,a.coords.error||(kronos("svg#IconNotifGeo").class("remove","text-danger"),kronos("svg#IconNotifGeo").class("add","text-success"),kronos().request("POST","/notif",{type:"geo"},o=>{"notif"===o.type&&(kronos("div#notif").html(o.View),kronos("div#GeoToast").toast("show"))})),kronos().request("POST","/meteo",{API_SEARCH:`lat=${a.coords.latitude}&lon=${a.coords.longitude}`},o=>{"DataView"===o.type?(kronos("div#Body").html(o.View),s(o.data),kronos("img#NotifPaysFlag").attr("add","src",""+o.dataCountry.flag),kronos("p#NotifPays").html(o.data.sys.country),kronos("#loadData").hide(),kronos("#dLoadData").class("toggle","border-0")):"notif"===o.type&&(kronos("div#notif").html(o.View),kronos("div#ApiToast").toast("show"))})}async function e(a){kronos("svg#IconNotifGeo").class("add","text-danger"),kronos("svg#IconNotifGeo").class("remove","text-success"),kronos("p#AccuracyGeo").html("0 %"),o=!1,s(void 0),kronos().request("POST","/notif",{type:"geoError"},o=>{"notif"===o.type&&(kronos("div#notif").html(o.View),kronos("div#GeoToast").toast("show"),kronos("#loadData").hide(),kronos("#dLoadData").class("toggle","border-0"))});n({coords:{accuracy:0,latitude:55.75,longitude:37.62,error:!0}}),kronos("button#RetryGeo").on("click",o=>{r()})}function r(){navigator.geolocation.getCurrentPosition(n,e,a)}async function t(){kronos("#loadData").show(),kronos("#dLoadData").class("toggle","border-0");const o=document.querySelectorAll("input#INameVille")[0].value;kronos().request("POST","/meteo",{API_SEARCH:"q="+o},o=>{"DataView"===o.type&&(kronos("div#Body").html(o.View),s(o.data),kronos("img#NotifPaysFlag").attr("add","src",""+o.dataCountry.flag),kronos("p#NotifPays").html(o.data.sys.country),kronos("#loadData").hide(),kronos("#dLoadData").class("toggle","border-0"))})}r(),kronos("button.navbar-toggler").on("click",o=>{kronos("div#notif").class("toggle","show"),kronos("div#notif").class("toggle","hide")}),kronos("button#nameVille").on("click",o=>{console.log(o),""===kronos("input#INameVille").val()&&kronos("input#INameVille").class("add","is-invalid"),""!==kronos("input#INameVille").val()&&t()}),kronos().keypress(o=>{"Enter"===o.key&&(""===kronos("input#INameVille").val()&&kronos("input#INameVille").class("add","is-invalid"),""!==kronos("input#INameVille").val()&&t())})});
